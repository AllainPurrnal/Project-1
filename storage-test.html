<!DOCTYPE html>

<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <title>Furr.Welcome</title>

    <!-- Firebase Reference -->
    <script src="https://www.gstatic.com/firebasejs/5.5.9/firebase.js"></script>

    <!-- Bootstrap Ref -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">

    <!-- Dev Styles -->
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>

    <div id='session-data-container' class="jumbotron">
        <h1>Session Data:</h1>
    </div>

    <div id='database-data-container' class="jumbotron">
        <h1>Database Data:</h1>
    </div>


    <!-- SCRIPTS BELOW -->
    <!-- =========================================================================================================================== -->

    <!-- jQuery Ref -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>

    <!-- firebase initialization -->
    <script type='text/javascript' src='assets/javascript/firebase-config.js'></script>

    <!-- =========================================================================================================================== -->

    <!-- Data Push into Local Storage -->
    <script type='text/javascript' src='assets/javascript/firebase/push-data-session.js'></script>

    <!-- Data Push into Firebase Storage -->
    <script type='text/javascript' src='assets/javascript/firebase/push-data-firebase.js'></script>
    <!-- =========================================================================================================================== -->
    <script>
        // If the user is signed in
        // Pull user's data from database

        // database ref
        var database = firebase.database();

        database.ref('users/').on('child_added', function (snapshot) {
            // store the data @ firebase
            var name = snapshot.val().name;
            var favorites = snapshot.val().favorites;
            var offset = snapshot.val().offset;
            
            var pName = $('<p>').text(name);
            var pFavorites = $('<p>').text(favorites);
            var pOffset = $('<p>').text(offset);

            $('#database-data-container').append(
                $('<hr>'),
                pName,
                pFavorites,
                pOffset,
        );
        });
    </script>
</body>

</html>